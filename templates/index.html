{% extends "base.html" %}
{% set body_id = 'bookshelf-page' %}
{% block content %}


<div class="bookshelf-content">

  <h3 class="bookshelf-title">本棚{{ shelves[0].shelf_id if shelves else '' }}</h3>

  {% if shelves and shelves[0].books %}
    <ul class="bookshelf-grid">
      {% for book in shelves[0].books %}
        <a href="{{ url_for('book_detail', book_id=book.book_id) }}">
          <img src="{{ url_for('serve_image', book_id=book.book_id) }}" alt="{{ book.name }}", class="book-on-shelf", height="120px">
        </a>
      {% endfor %}
    </ul>
  {% else %}
    <p class="no-books-message" style="color: white;">この本棚には本がありません。</p>
  {% endif %}

</div>
<div style="text-align:center; margin-top:1em;">
  <button id="prev-btn">&lt;</button>
  <span id="shelf-index">1</span> / {{ shelves|length }}
  <button id="next-btn">&gt;</button>
</div>
<script>
  const shelves = document.querySelectorAll('.shelf-block');
  let current = 0;
  document.getElementById('prev-btn').onclick = function() {
    shelves[current].style.display = 'none';
    current = (current - 1 + shelves.length) % shelves.length;
    shelves[current].style.display = '';
    document.getElementById('shelf-index').textContent = current + 1;
  };
  document.getElementById('next-btn').onclick = function() {
    shelves[current].style.display = 'none';
    current = (current + 1) % shelves.length;
    shelves[current].style.display = '';
    document.getElementById('shelf-index').textContent = current + 1;
  };
</script>


{% endblock %}